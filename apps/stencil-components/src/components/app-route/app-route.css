:host {
  display: block;
  width: 100%;
  min-width: 0;
  box-sizing: border-box;

  --ta-safe-top: 0px;
  --ta-safe-bottom: 0px;
  --ta-safe-left: 0px;
  --ta-safe-right: 0px;
  --ta-vh: 1vh;
}

:host([safe-area]) {
  --ta-safe-top: env(safe-area-inset-top);
  --ta-safe-bottom: env(safe-area-inset-bottom);
  --ta-safe-left: env(safe-area-inset-left);
  --ta-safe-right: env(safe-area-inset-right);
}

[part='root'] {
  position: relative;
  display: flex;
  flex-direction: var(--ta-dir, column);
  flex-wrap: var(--ta-wrap, nowrap);
  justify-content: var(--ta-justify, flex-start);
  align-items: var(--ta-align, stretch);
  align-content: var(--ta-align-content, stretch);
  gap: var(--ta-gap, 0);
  row-gap: var(--ta-row-gap, var(--ta-gap, 0));
  column-gap: var(--ta-column-gap, var(--ta-gap, 0));

  /* Derived spacing vars */
  --ta-pad-base: var(--ta-pad, 0);
  --ta-pad-inline-base: var(--ta-pad-inline, var(--ta-pad-base));
  --ta-pad-block-base: var(--ta-pad-block, var(--ta-pad-base));
  --ta-pad-inline-start-base: var(--ta-pad-inline-start, var(--ta-pad-inline-base));
  --ta-pad-inline-end-base: var(--ta-pad-inline-end, var(--ta-pad-inline-base));
  --ta-pad-block-start-base: var(--ta-pad-block-start, var(--ta-pad-block-base));
  --ta-pad-block-end-base: var(--ta-pad-block-end, var(--ta-pad-block-base));
  --ta-pad-inline-start-value: calc(var(--ta-pad-inline-start-base) + var(--ta-safe-left));
  --ta-pad-inline-end-value: calc(var(--ta-pad-inline-end-base) + var(--ta-safe-right));
  --ta-pad-block-start-value: calc(var(--ta-pad-block-start-base) + var(--ta-safe-top));
  --ta-pad-block-end-value: calc(var(--ta-pad-block-end-base) + var(--ta-safe-bottom));

  --ta-mar-base: var(--ta-mar, 0);
  --ta-mar-inline-base: var(--ta-mar-inline, var(--ta-mar-base));
  --ta-mar-block-base: var(--ta-mar-block, var(--ta-mar-base));
  --ta-mar-inline-start-value: var(--ta-mar-inline-start, var(--ta-mar-inline-base));
  --ta-mar-inline-end-value: var(--ta-mar-inline-end, var(--ta-mar-inline-base));
  --ta-mar-block-start-value: var(--ta-mar-block-start, var(--ta-mar-block-base));
  --ta-mar-block-end-value: var(--ta-mar-block-end, var(--ta-mar-block-base));

  width: var(--ta-width, 100%);
  max-width: var(--ta-max-w, none);
  min-height: var(--ta-min-h, auto);
  height: var(--ta-height, auto);
  box-sizing: border-box;

  margin-inline-start: var(--ta-mar-inline-start-value);
  margin-inline-end: var(--ta-mar-inline-end-value);
  margin-block-start: var(--ta-mar-block-start-value);
  margin-block-end: var(--ta-mar-block-end-value);

  padding-inline-start: var(--ta-pad-inline-start-value);
  padding-inline-end: var(--ta-pad-inline-end-value);
  padding-block-start: var(--ta-pad-block-start-value);
  padding-block-end: var(--ta-pad-block-end-value);

  color: var(--ta-color, inherit);
  background-color: var(--ta-bg, transparent);
  background-image: var(--ta-bg-img, none);
  background-size: var(--ta-bg-size, cover);
  background-position: var(--ta-bg-position, 50% 50%);
  background-repeat: var(--ta-bg-repeat, no-repeat);
  background-attachment: var(--ta-bg-attachment, scroll);
  background-blend-mode: var(--ta-bg-blend, normal);

  border-radius: var(--ta-radius, 0);
  border: var(--ta-border, none);
  box-shadow: var(--ta-shadow, none);
  backdrop-filter: var(--ta-backdrop-filter, none);

  font-family: var(--ta-font, inherit);
  font-size: var(--ta-font-size, inherit);
  font-weight: var(--ta-font-weight, inherit);
  line-height: var(--ta-line-height, inherit);
  letter-spacing: var(--ta-letter-spacing, normal);
  text-transform: var(--ta-text-transform, none);
  text-align: var(--ta-text-align, initial);

  overflow-x: var(--ta-overflow-x, var(--ta-overflow, visible));
  overflow-y: var(--ta-overflow-y, var(--ta-overflow, visible));
  scroll-behavior: var(--ta-scroll-behavior, auto);
  scroll-padding: var(--ta-scroll-padding, 0);
  scroll-padding-inline: var(--ta-scroll-padding-inline, var(--ta-scroll-padding, 0));
  scroll-padding-block: var(--ta-scroll-padding-block, var(--ta-scroll-padding, 0));
  scroll-snap-type: var(--ta-scroll-snap, none);

  isolation: isolate;
}

:host([center]) [part='root'] {
  margin-inline-start: auto;
  margin-inline-end: auto;
}

/* Overlay 레이어 */
[part='root']::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: var(--ta-overlay, transparent);
  opacity: var(--ta-overlay-opacity, 0);
  mix-blend-mode: var(--ta-overlay-blend, normal);
  z-index: 0;
}

/* Height modes */
:host([height-mode='dvh']) [part='root'] {
  min-height: var(--ta-min-h, calc(var(--ta-vh, 1vh) * 100));
  min-height: var(--ta-min-h, 100dvh);
}

:host([height-mode='screen']) [part='root'] {
  min-height: var(--ta-height, calc(var(--ta-vh, 1vh) * 100));
  min-height: var(--ta-height, 100dvh);
  height: var(--ta-height, calc(var(--ta-vh, 1vh) * 100));
  height: var(--ta-height, 100dvh);
}

::slotted(*) {
  position: relative;
  z-index: 1;
  margin: 0;
  scroll-snap-align: var(--ta-snap-align, unset);
}
