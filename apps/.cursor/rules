# UXBIT 디자인 시스템 개발 규칙

> **목표**: 호환성, 사용성, 재사용성이 뛰어난 디자인 시스템 구축

---

## 🎯 프로젝트 개요

UXBIT은 **Stencil.js 기반 Web Components 디자인 시스템**입니다.

- **프레임워크 독립성**: React, Vue, Angular, 바닐라 JS 등 모든 환경에서 사용 가능
- **표준 기반**: Web Components 표준 사용으로 장기 호환성 보장
- **성능 최적화**: Lazy loading, Shadow DOM 격리, 최소 번들 크기
- **접근성 우선**: ARIA, 키보드 네비게이션, 스크린 리더 지원

### 현재 구현 상태

- ✅ **6개 컴포넌트**: button, image, section, typography, wrapper, app-route
- ✅ **Shadow DOM**: 모든 컴포넌트에서 스타일 격리
- ✅ **CSS 변수 기반**: 테마 커스터마이징 지원
- ✅ **TypeScript**: 완전한 타입 안정성
- ✅ **Storybook**: 컴포넌트 문서화 및 프리뷰

---

## 👨‍💻 시니어 개발자 규칙

### 아키텍처 원칙

1. **컴포넌트 구조 일관성**
   ```
   component-name/
   ├── component-name.tsx      # 컴포넌트 로직
   ├── component-name.css      # 스타일
   ├── component-name.types.ts # TypeScript 타입
   └── component-name.stories.tsx # Storybook 스토리
   ```

2. **Props 설계 원칙**
   - Props는 **시각/레이아웃/동작/타이포**로 명확히 분리
   - 모든 Props는 `reflect: true`로 HTML 속성과 동기화
   - 기본값은 항상 명시
   - 타입은 엄격하게 정의 (string 허용 최소화)

3. **CSS 변수 패턴**
   ```css
   /* 네이밍 규칙: --t-{component}-{property} */
   --t-button-bg: #111827;
   --t-button-fg: #ffffff;
   --t-image-radius: 8px;
   ```

4. **타입 중복 방지**
   - 공통 타입은 `src/types/common.types.ts`에 정의
   - `FlexDirection`, `Justify`, `AlignItems` 등은 재사용

5. **이벤트 네이밍**
   - 커스텀 이벤트는 `tinto:{action}` 형식
   - 예: `tintoClick`, `tintoLoaded`, `tintoToggle`

### 코드 품질 기준

1. **반응형 디자인 필수 (모바일 + 데스크탑 크로스플랫폼)**
   - **모바일 퍼스트**: 모든 컴포넌트는 모바일에서 먼저 설계
   - **터치 타겟**: 최소 44x44px (WCAG 2.5.5)
   - **반응형 폰트**: `clamp()` 또는 `vw` 단위 사용
   - **유연한 레이아웃**: `max-width: 100%`, `box-sizing: border-box` 필수
   - **데스크탑 오버라이드**: 필요시 `*Desktop` props 또는 미디어 쿼리 사용
   - **브레이크포인트**: 기본 1920px, 필요시 커스터마이징 가능
   - **터치 이벤트**: 모바일에서도 정상 작동 (hover 대신 active/focus 사용)

2. **성능 최적화**
   - Lazy loading은 IntersectionObserver 사용
   - 애니메이션은 `prefers-reduced-motion` 고려
   - 메모리 누수 방지 (disconnectedCallback에서 cleanup)

3. **접근성 필수**
   - 모든 인터랙티브 요소는 키보드 접근 가능
   - ARIA 속성 적절히 사용
   - 스크린 리더 대응 (sr-only, aria-live 등)

4. **에러 핸들링**
   - 이미지 로드 실패 시 fallback 제공
   - 잘못된 prop 값에 대한 경고/기본값 처리
   - 에러 이벤트 발생 시 상세 정보 제공

5. **테스트**
   - 각 컴포넌트는 E2E 테스트 필수
   - Props 검증 테스트
   - 접근성 테스트 (a11y)
   - 반응형 테스트 (모바일/데스크탑)

### 금지 사항

- ❌ Host 요소에 직접 스타일 적용 (CSS 변수 사용)
- ❌ 전역 스타일 의존 (Shadow DOM 내부에서만 스타일)
- ❌ 프레임워크 특정 코드 (React, Vue 등)
- ❌ 하드코딩된 값 (토큰/변수 사용)

### 개선 우선순위

1. **Phase 1 (즉시)**
   - 타입 중복 제거 (`src/types/common.types.ts` 생성)
   - 에러 핸들링 표준화
   - 테스트 커버리지 확대

2. **Phase 2 (단기)**
   - 성능 모니터링 도구 추가
   - 반응형 브레이크포인트 커스터마이징
   - Props 그룹화 (복잡한 컴포넌트)

---

## 🎨 UX/UI 디자이너 규칙

### 디자인 토큰 시스템

1. **폰트 패밀리**
   - `system`: 시스템 기본
   - `pretendard`: Pretendard
   - `paperlogy`: Paperlogy
   - `clash-display`: Clash Display
   - `climate-crisis`: Climate Crisis

2. **폰트 크기 토큰**
   - `xs`: 0.75rem (12px)
   - `sm`: 0.875rem (14px)
   - `md`: 1rem (16px)
   - `lg`: 1.125rem (18px)
   - `xl`: 1.25rem (20px)
   - `xxl`: 1.5rem (24px)

3. **색상**
   - CSS 변수로 커스터마이징 가능
   - 예: `--t-button-bg`, `--t-button-fg`

### 컴포넌트 사용 가이드

1. **버튼 (tinto-button)**
   - Variant: `primary`, `secondary`, `tertiary`
   - Size: `sm`, `md`, `lg`
   - 모드: 일반, 링크, 폼, 토글, 로딩

2. **이미지 (tinto-image)**
   - Ratio: `16:9`, `1:1`, `4:3` 등
   - Rounded: `soft`, `oval`, `top`, `circle`
   - 애니메이션: `spin`, `float`, `wobble`, `pulse`

3. **레이아웃 컴포넌트**
   - `tinto-section`: 기본 섹션
   - `tinto-wrapper`: 배경 이미지/오버레이
   - `tinto-app-route`: 고급 레이아웃 (Safe area, Scroll snap)

### 디자인 원칙

1. **모바일 퍼스트 + 반응형 데스크탑 (크로스플랫폼 필수)**
   - 모든 컴포넌트는 모바일에서 먼저 설계
   - 데스크탑 오버라이드는 `*Desktop` props로 제어
   - **반응형 폰트**: `clamp()` 사용 (예: `clamp(1rem, 2.5vw, 1.5rem)`)
   - **유연한 레이아웃**: `max-width: 100%`, `box-sizing: border-box` 필수
   - **터치 타겟**: 최소 44x44px (모바일 필수)
   - **브레이크포인트**: 기본 1920px, 필요시 커스터마이징

2. **일관성**
   - 동일한 패턴은 동일한 컴포넌트 사용
   - Props 네이밍 일관성 유지

3. **접근성**
   - 색상 대비 비율 준수 (WCAG AA 이상)
   - 포커스 상태 명확히 표시
   - 터치 타겟 최소 44x44px (모바일 필수)

4. **성능**
   - 이미지는 lazy loading 기본
   - 애니메이션은 `prefers-reduced-motion` 고려
   - 불필요한 애니메이션 지양

### 디자인 시스템 문서

- 컴포넌트 문서: `apps/stencil-components/docs/components/`
- 전체 개요: `apps/stencil-components/docs/COMPONENTS_OVERVIEW.md`
- 검증 리포트: `apps/stencil-components/docs/COMPONENT_VALIDATION_REPORT.md`

### 디자인 작업 시 체크리스트

- [ ] 컴포넌트 조합으로 구현 가능한지 확인
- [ ] CSS 변수로 커스터마이징 가능한지 확인
- [ ] 모바일/데스크탑 반응형 고려
- [ ] 접근성 가이드라인 준수
- [ ] Storybook에서 프리뷰 확인

---

## 📊 PM (Product Manager) 규칙

### 프로젝트 목표

**호환성, 사용성, 재사용성이 뛰어난 디자인 시스템**

1. **호환성**
   - 모든 주요 프레임워크에서 사용 가능
   - 브라우저 호환성 (최신 브라우저 + 구형 브라우저 fallback)
   - 장기 유지보수 가능 (표준 기반)

2. **사용성**
   - 직관적인 API
   - 명확한 문서화
   - 접근성 우선

3. **재사용성**
   - 컴포넌트 조합으로 다양한 레이아웃 구성
   - CSS 변수로 테마 커스터마이징
   - Props로 세밀한 제어

### 현재 상태

- **컴포넌트 수**: 6개 (button, image, section, typography, wrapper, app-route)
- **평균 점수**: 4.0/5.0 ⭐⭐⭐⭐
- **문서화**: 완료
- **테스트**: typography만 존재 (개선 필요)

### 우선순위 로드맵

#### Phase 1: 즉시 개선 (High Priority)
1. ✅ 타입 중복 제거
2. ✅ 문서화 보완
3. ⏳ 에러 핸들링 표준화
4. ⏳ 테스트 커버리지 확대

#### Phase 2: 단기 개선 (Medium Priority)
1. 성능 모니터링 도구
2. 반응형 브레이크포인트 커스터마이징
3. Props 그룹화 (복잡한 컴포넌트)

#### Phase 3: 장기 개선 (Low Priority)
1. 애니메이션 로직 모듈화
2. 번들 크기 최적화
3. 추가 컴포넌트 개발

### 의사결정 기준

1. **새 컴포넌트 추가 시**
   - 기존 컴포넌트 조합으로 불가능한가?
   - 재사용 가능성이 높은가?
   - 표준 Web Components로 구현 가능한가?

2. **Props 추가 시**
   - 기존 Props로 불가능한가?
   - 사용 빈도가 높은가?
   - 타입 안정성을 해치지 않는가?

3. **Breaking Change 시**
   - 마이그레이션 가이드 제공
   - 버전 관리 (Semantic Versioning)
   - 하위 호환성 고려

### 메트릭

- **컴포넌트 재사용률**: Storybook 사용 통계
- **번들 크기**: 각 컴포넌트별 크기 모니터링
- **성능**: Lighthouse 점수
- **접근성**: a11y 테스트 통과율

---

## 📝 기획자 규칙

### 디자인 시스템 전략

1. **프레임워크 독립성**
   - 한 번 작성, 모든 곳에서 사용
   - 프레임워크 전환 시 재작성 불필요
   - 장기 투자 가치

2. **표준 기반**
   - Web Components 표준 사용
   - 브라우저 네이티브 지원
   - 미래 호환성 보장

3. **성능 우선**
   - 작은 번들 크기
   - Lazy loading
   - 최적화된 렌더링

### 사용 시나리오

1. **멀티 프레임워크 환경**
   - 여러 팀이 다른 프레임워크 사용
   - 공통 디자인 시스템 필요

2. **마이크로 프론트엔드**
   - 독립적으로 배포되는 컴포넌트
   - 버전 충돌 없음

3. **장기 유지보수**
   - 표준 기반으로 장기 지원
   - 프레임워크 의존성 없음

### 비즈니스 가치

1. **개발 효율성**
   - 컴포넌트 재사용으로 개발 시간 단축
   - 일관된 UI/UX

2. **유지보수 비용 절감**
   - 중앙 집중식 관리
   - 버그 수정 시 모든 프로젝트에 반영

3. **확장성**
   - 새로운 프로젝트에 쉽게 적용
   - 프레임워크 제약 없음

### 요구사항 정의 시 체크리스트

- [ ] 기존 컴포넌트로 구현 가능한가?
- [ ] 프레임워크 독립적으로 구현 가능한가?
- [ ] 접근성 요구사항 충족 가능한가?
- [ ] 성능 요구사항 충족 가능한가?
- [ ] 재사용 가능성이 높은가?

### 문서 참조

- **전체 개요**: `apps/stencil-components/docs/COMPONENTS_OVERVIEW.md`
- **컴포넌트 문서**: `apps/stencil-components/docs/components/`
- **검증 리포트**: `apps/stencil-components/docs/COMPONENT_VALIDATION_REPORT.md`

---

## 🔧 공통 개발 규칙

### 코드 스타일

1. **TypeScript**
   - 엄격한 타입 체크
   - `any` 사용 지양
   - 명시적 타입 정의

2. **네이밍**
   - 컴포넌트: `kebab-case` (예: `tinto-button`)
   - Props: `camelCase` (예: `textFamily`)
   - CSS 변수: `--t-{component}-{property}`

3. **주석**
   - JSDoc 스타일 주석
   - 복잡한 로직은 설명 추가

### Git 워크플로우

1. **브랜치 전략**
   - `main`: 프로덕션
   - `develop`: 개발
   - `feature/*`: 기능 개발
   - `fix/*`: 버그 수정

2. **커밋 메시지**
   - `feat(component): 설명`
   - `fix(component): 설명`
   - `docs: 설명`
   - `refactor: 설명`

### 테스트

1. **E2E 테스트**
   - 각 컴포넌트별 필수
   - 주요 사용 시나리오 커버

2. **접근성 테스트**
   - a11y 테스트 통과
   - 키보드 네비게이션 테스트
   - 스크린 리더 테스트

### 문서화

1. **컴포넌트 문서**
   - Props 설명
   - 사용 예시
   - 접근성 가이드
   - 문제 해결

2. **Storybook**
   - 모든 컴포넌트 스토리 작성
   - 다양한 변형 예시
   - 인터랙티브 문서

---

## 📚 참고 자료

### 내부 문서
- [컴포넌트 검증 리포트](../stencil-components/docs/COMPONENT_VALIDATION_REPORT.md)
- [컴포넌트 개요](../stencil-components/docs/COMPONENTS_OVERVIEW.md)
- [개별 컴포넌트 문서](../stencil-components/docs/components/)

### 외부 자료
- [Stencil.js 공식 문서](https://stenciljs.com/docs/introduction)
- [Web Components 표준](https://developer.mozilla.org/en-US/docs/Web/Web_Components)
- [WCAG 접근성 가이드](https://www.w3.org/WAI/WCAG21/quickref/)

---

## ⚠️ 주의사항

### Stencil MCP

현재 Stencil.js 공식 MCP는 제공되지 않습니다. MUI MCP는 있으나 Stencil과는 무관합니다.

### 호환성

- **브라우저**: 최신 브라우저 + 구형 브라우저 fallback
- **프레임워크**: React, Vue, Angular, Svelte, 바닐라 JS 모두 지원
- **TypeScript**: 5.9.3 이상

### 성능

- 번들 크기 모니터링 필수
- Lazy loading 적극 활용
- 불필요한 애니메이션 지양

---

**마지막 업데이트**: 2024년  
**버전**: 1.0.0

